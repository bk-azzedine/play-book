<div class="min-h-screen bg-[#f8f7ff]">
  <hlm-toaster/>
  <!-- Loading State -->
  <div *ngIf="isLoading" class="max-w-3xl mx-auto p-4 py-8">
    <div class="bg-white rounded-2xl shadow-xl overflow-hidden p-8">
      <div class="flex items-center justify-center py-12">
        <div class="w-8 h-8 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin"></div>
        <span class="ml-3 text-gray-600">Loading invitation...</span>
      </div>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="max-w-3xl mx-auto p-4 py-8">
    <div class="bg-white rounded-2xl shadow-xl overflow-hidden p-8">
      <div class="text-center py-12">
        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-red-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="15" y1="9" x2="9" y2="15"/>
            <line x1="9" y1="9" x2="15" y2="15"/>
          </svg>
        </div>
        <h2 class="text-xl font-semibold text-gray-900 mb-2">Error</h2>
        <p class="text-gray-600">{{ error }}</p>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <main *ngIf="!isLoading && !error" class="max-w-3xl mx-auto p-4 py-8">
    <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
      <!-- Invitation Header -->
      <div class="bg-gradient-to-r bg-primary px-8 py-10 text-center text-white">
        <h1 class="text-2xl font-semibold mb-3">You've been invited to join a team</h1>

      </div>

      <div class="p-8">
        <!-- Team Information -->
        <div class="flex flex-col items-center text-center mb-8">
          <div class="w-20 h-20 bg-purple-100 rounded-2xl flex items-center justify-center flex-shrink-0 mb-4 shadow-sm">
            <svg
              class="w-10 h-10 text-purple-600"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
              <circle cx="9" cy="7" r="4" />
              <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
              <path d="M16 3.13a4 4 0 0 1 0 7.75" />
            </svg>
          </div>
          <div>
            <h2 class="text-2xl font-semibold text-gray-900 mb-2">{{ inviteData.teamName }}</h2>
            <p *ngIf="inviteData.orgName" class="text-gray-500 mb-1">{{ inviteData.orgName }}</p>
            <p *ngIf="inviteData.teamDescription" class="text-gray-500">{{ inviteData.teamDescription }}</p>
          </div>
        </div>

        <!-- Role Information -->
        <div class="bg-gray-50 rounded-xl p-6 mb-8">
          <div class="flex items-center gap-3 mb-4">
            <div class="bg-purple-100 w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0">
              <svg
                class="w-5 h-5 text-purple-600"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="3" />
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900">You're invited as a {{ inviteData.role }}</h3>
          </div>

          <p class="text-gray-600 text-sm leading-relaxed mb-5 pl-12">
            As a {{ inviteData.role.toLowerCase() }} of this team, you'll have the following permissions:
          </p>

          <div class="space-y-3 pl-12">
            <div *ngFor="let permission of getRolePermissions()" class="flex items-center gap-2 text-sm text-gray-600">
              <svg
                class="w-5 h-5 text-green-500 flex-shrink-0"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              <span>{{ permission }}</span>
            </div>
          </div>
        </div>

        <!-- Error Message -->
        <div *ngIf="error" class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-red-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="15" y1="9" x2="9" y2="15"/>
              <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
            <span class="text-red-700 text-sm">{{ error }}</span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-4">
          <button
            (click)="acceptInvitation()"
            [disabled]="isAccepting || isDeclining"
            class="flex-1 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 h-15 text-white px-6 py-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg"
          >
            <div
              *ngIf="isAccepting"
              class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"
            ></div>
            <svg
              *ngIf="!isAccepting"
              class="w-5 h-5"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            {{ isAccepting ? 'Accepting...' : 'Accept Invitation' }}
          </button>
          <button
            (click)="declineInvitation()"
            [disabled]="isAccepting || isDeclining"
            class="flex-1 bg-white hover:bg-gray-50 text-gray-700 px-6 py-4 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md border border-gray-200"
          >
            {{ isDeclining ? 'Declining...' : 'Decline' }}
          </button>
        </div>
      </div>

      <div class="bg-gray-50 px-8 py-6 text-center border-t border-gray-200">
        <p class="text-gray-600 text-sm">
          Already have an account?
          <a href="/login" class="text-purple-600 hover:underline font-medium">
            Sign in
          </a>
          to accept this invitation
        </p>
      </div>
    </div>
  </main>
</div>
